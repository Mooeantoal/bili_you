# GitHub Actions è‡ªåŠ¨æ„å»ºé…ç½®

æœ¬é¡¹ç›®é…ç½®äº†GitHub Actionsè‡ªåŠ¨æ„å»ºç³»ç»Ÿï¼Œå¯ä»¥è‡ªåŠ¨æ„å»ºAndroid APKæ–‡ä»¶ã€‚

## ğŸ”§ å·¥ä½œæµé…ç½®

### 1. ä¸»æ„å»ºå·¥ä½œæµ (`main.yml`)

**è§¦å‘æ¡ä»¶ï¼š**
- æ¨é€tagæ—¶è‡ªåŠ¨æ„å»ºå¹¶å‘å¸ƒ (å¦‚ `v1.1.5`)
- æ‰‹åŠ¨è§¦å‘æ„å»º

**åŠŸèƒ½ç‰¹æ€§ï¼š**
- âœ… è‡ªåŠ¨æ„å»ºå¤šæ¶æ„APK (arm64-v8a, armeabi-v7a, x86_64)
- âœ… æ”¯æŒAPKç­¾å (éœ€é…ç½®ç­¾åå¯†é’¥)
- âœ… è‡ªåŠ¨åˆ›å»ºGitHub Release
- âœ… æ™ºèƒ½æ–‡ä»¶é‡å‘½å (åŒ…å«ç‰ˆæœ¬ä¿¡æ¯)
- âœ… ä»£ç åˆ†æå’Œè´¨é‡æ£€æŸ¥ (ä¸¥æ ¼æ¨¡å¼ï¼Œå¿…é¡»é€šè¿‡)
- âœ… æ„å»ºäº§ç‰©ä¸Šä¼ 

### 2. æ„å»ºæµ‹è¯•å·¥ä½œæµ (`build-test.yml`)

**è§¦å‘æ¡ä»¶ï¼š**
- æ¨é€åˆ°ä¸»åˆ†æ”¯ (main/master/develop)
- åˆ›å»ºPull Request

**åŠŸèƒ½ç‰¹æ€§ï¼š**
- âœ… å¿«é€Ÿæ„å»ºæµ‹è¯• (debugæ¨¡å¼)
- âœ… ä»£ç åˆ†æ (ä¸¥æ ¼æ¨¡å¼ï¼Œä»»ä½•è­¦å‘Šæˆ–é”™è¯¯éƒ½ä¼šå¯¼è‡´å¤±è´¥)
- âœ… å•å…ƒæµ‹è¯•æ‰§è¡Œ
- âœ… æ„å»ºäº§ç‰©éªŒè¯

## ğŸ” ç­¾åé…ç½® (å¯é€‰)

å¦‚æœéœ€è¦å‘å¸ƒæ­£å¼ç­¾åçš„APKï¼Œéœ€è¦åœ¨GitHubä»“åº“è®¾ç½®ä¸­æ·»åŠ ä»¥ä¸‹Secretsï¼š

### å¿…éœ€çš„Secretsï¼š

1. **KEYSTORE** - Base64ç¼–ç çš„keystoreæ–‡ä»¶
   ```bash
   base64 -w 0 your-keystore.jks
   ```

2. **KEYSTORE_PASSWORD** - keystoreå¯†ç 

3. **KEY_ALIAS** - å¯†é’¥åˆ«å

4. **KEY_PASSWORD** - å¯†é’¥å¯†ç 

### è®¾ç½®Secretsæ­¥éª¤ï¼š

1. è¿›å…¥GitHubä»“åº“
2. ç‚¹å‡» Settings â†’ Secrets and variables â†’ Actions
3. ç‚¹å‡» "New repository secret"
4. æ·»åŠ ä¸Šè¿°å››ä¸ªsecrets

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### è‡ªåŠ¨å‘å¸ƒ (æ¨è)

1. **åˆ›å»ºå¹¶æ¨é€tagï¼š**
   ```bash
   git tag v1.1.6
   git push origin v1.1.6
   ```

2. **GitHub Actionsä¼šè‡ªåŠ¨ï¼š**
   - æ„å»ºå¤šæ¶æ„APK
   - åˆ›å»ºGitHub Release
   - ä¸Šä¼ APKæ–‡ä»¶åˆ°Release

### æ‰‹åŠ¨æ„å»º

1. è¿›å…¥GitHubä»“åº“çš„Actionsé¡µé¢
2. é€‰æ‹© "Build and Release APK" å·¥ä½œæµ
3. ç‚¹å‡» "Run workflow"
4. è¾“å…¥ç‰ˆæœ¬å· (å¯é€‰)
5. ç‚¹å‡» "Run workflow" æŒ‰é’®

## ğŸ“¦ APKæ–‡ä»¶è¯´æ˜

æ„å»ºå®Œæˆåä¼šç”Ÿæˆä»¥ä¸‹APKæ–‡ä»¶ï¼š

- **bili_you_*_arm64-v8a.apk** - 64ä½ARMè®¾å¤‡ (æ¨èï¼Œæ”¯æŒå¤§éƒ¨åˆ†ç°ä»£Androidè®¾å¤‡)
- **bili_you_*_armeabi-v7a.apk** - 32ä½ARMè®¾å¤‡ (å…¼å®¹è€è®¾å¤‡)
- **bili_you_*_x86_64.apk** - 64ä½x86è®¾å¤‡ (æ¨¡æ‹Ÿå™¨æˆ–ç‰¹æ®Šè®¾å¤‡)

## ğŸ› ï¸ æœ¬åœ°æ„å»ºå‘½ä»¤

å¦‚æœéœ€è¦åœ¨æœ¬åœ°æ„å»ºï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š

```bash
# è·å–ä¾èµ–
flutter pub get

# æ„å»ºrelease APK (åˆ†æ¶æ„)
flutter build apk --release --split-per-abi

# æ„å»ºdebug APK
flutter build apk --debug

# æ„å»ºå•ä¸ªæ¶æ„ (æ›´å¿«)
flutter build apk --release --target-platform android-arm64
```

## ğŸ“Š æ„å»ºçŠ¶æ€

- [![Build and Release APK](../../actions/workflows/main.yml/badge.svg)](../../actions/workflows/main.yml)
- [![Build Test](../../actions/workflows/build-test.yml/badge.svg)](../../actions/workflows/build-test.yml)

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **Flutterç‰ˆæœ¬ï¼š** å·¥ä½œæµä½¿ç”¨Flutter 3.16.0ï¼Œç¡®ä¿æœ¬åœ°å¼€å‘ç¯å¢ƒå…¼å®¹
2. **ç­¾åé…ç½®ï¼š** æœªé…ç½®ç­¾åå¯†é’¥æ—¶ä¼šæ„å»ºæœªç­¾åAPK
3. **æ„å»ºæ—¶é—´ï¼š** å®Œæ•´æ„å»ºå¤§çº¦éœ€è¦10-15åˆ†é’Ÿ
4. **å­˜å‚¨ç©ºé—´ï¼š** æ„å»ºäº§ç‰©ä¼šå ç”¨GitHub Actionså­˜å‚¨ç©ºé—´

## ğŸ” æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜ï¼š

1. **æ„å»ºå¤±è´¥ï¼š**
   - æ£€æŸ¥Flutterç‰ˆæœ¬å…¼å®¹æ€§
   - æŸ¥çœ‹Actionsæ—¥å¿—ä¸­çš„é”™è¯¯ä¿¡æ¯
   - ç¡®è®¤ä¾èµ–ç‰ˆæœ¬æ˜¯å¦æ­£ç¡®

2. **ç­¾åå¤±è´¥ï¼š**
   - éªŒè¯æ‰€æœ‰ç­¾åç›¸å…³Secretsæ˜¯å¦æ­£ç¡®è®¾ç½®
   - æ£€æŸ¥keystoreæ–‡ä»¶æ˜¯å¦æ­£ç¡®ç¼–ç 

3. **Releaseåˆ›å»ºå¤±è´¥ï¼š**
   - ç¡®è®¤tagæ ¼å¼æ­£ç¡® (ä»¥vå¼€å¤´ï¼Œå¦‚v1.1.5)
   - æ£€æŸ¥GitHub tokenæƒé™

å¦‚æœ‰å…¶ä»–é—®é¢˜ï¼Œè¯·æŸ¥çœ‹Actionsè¿è¡Œæ—¥å¿—æˆ–åˆ›å»ºIssueã€‚